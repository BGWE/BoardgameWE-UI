language: node_js

node_js:
  - 10.0.0

branches:
  only:
    - master
    - develop

env:
  global:
    - TEST_RESULTS_DIR=$SHIPPABLE_REPO_DIR/shippable/testresults
    - CODE_COVERAGE_DIR=$SHIPPABLE_REPO_DIR/shippable/codecoverage
    - TESTS_LOC_DIR=$SHIPPABLE_REPO_DIR/tests
    - MOD_LOC=$SHIPPABLE_REPO_DIR/node_modules/.bin/
    - AWS_S3_BUCKET='s3://www.boardgameweekend.party'
    - AWS_S3_REGION='eu-west-1'
    - secure: Za/C0aeDGUeaAv2Pr5AgWqY4+8j7eH63J0YwF/HD7h2mR1gAKIjgFPe0u6Rj09fqrohoVplWhAIwM5DU9o9cw67W+EYjth1nI0bpN0FlgvOxDrhJ8siJoygd3Mf4/XqQNJbjSiUTGJHDHkfl2LsM/2CDxzlGERru0RQJ/88wH5vwGeSkgnulWyD35PRSDIGb8z+BLmkytaK5+ohS3wGOsd0GvvgwxkmRSUfpJ4yWw9MIZwRGYVvswC73dJEJ8xsbS0Ob6fQqu3x2ufCzyasAi0Clem1RGYJIv/gc/pxiNdyzeOK4S3TLj/3mUIionk0cIGMw1yYqo1wXGCy0GvZj3g==

build:

  ci:
    - cd boardgamewe-ui
    - npm install
    - npm run build
    - echo $SHIPPABLE_BUILD_DIR
    - ls $SHIPPABLE_BUILD_DIR

  on_success:
  - aws s3 sync $SHIPPABLE_BUILD_DIR/boardgamewe-ui/build/* $AWS_S3_BUCKET --region $AWS_S3_REGION